(this["webpackJsonpmoviestore-client"]=this["webpackJsonpmoviestore-client"]||[]).push([[16],{253:function(e,t,a){"use strict";var i=a(0),n=a.n(i),s=a(9),r=a.n(s),c=a(103),l=a(141),o=a(194),m=a(179),d=a(180),h=a(212),p=a(193),g=a(66),u=a(69),v=a(33),f=Object(v.a)(n.a.createElement("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"}),"AttachMoney"),E=a(258),b=a(27),C=a(40),y=a(20);const x=Object(c.a)(e=>({root:{maxWidth:"100%",paddingBottom:e.spacing(2),cursor:"pointer"},imageWrapper:{height:"200px",margin:"0 auto",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},image:{width:"100%",height:"100%","object-fit":"cover"},details:{padding:e.spacing(3)},name:{fontSize:"18px",lineHeight:"21px",marginTop:e.spacing(2),textTransform:"capitalize"},city:{lineHeight:"16px",height:e.spacing(4),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:e.palette.text.secondary,marginTop:e.spacing(1),marginBottom:e.spacing(2)},stats:{display:"flex",alignItems:"center",paddingTop:e.spacing(1),paddingLeft:e.spacing(3)},eventIcon:{color:e.palette.text.secondary},eventText:{marginLeft:e.spacing(1),color:e.palette.text.secondary}}));t.a=Object(b.b)(e=>{let{movieState:t,showtimeState:a}=e;return{movies:t.movies,showtimes:a.showtimes}},{getMovies:C.j,getShowtimes:C.l})((function(e){const t=x(e),{className:a,cinema:s,movies:c,showtimes:v,getMovies:b,getShowtimes:C}=e,[k,S]=Object(i.useState)(!1),[N,D]=Object(i.useState)([]);Object(i.useEffect)(()=>{c.length||b(),v.length||C()},[c,v,b,C]),Object(i.useEffect)(()=>{if(s&&v.length&&c.length){const e=v.filter(e=>e.cinemaId===s._id),t=[...new Set(e.map(e=>e.movieId))],a=c.filter(e=>t.includes(e._id));D(a)}},[s,v,c]);const w=(null===s||void 0===s?void 0:s.image)||"https://source.unsplash.com/featured/?cinema",j=r()(t.root,a);return n.a.createElement(n.a.Fragment,null,n.a.createElement(u.c,{className:j},n.a.createElement("div",{className:t.imageWrapper},n.a.createElement("img",{alt:"cinema",className:t.image,src:w,onClick:()=>S(!0)})),n.a.createElement("div",{className:t.details},n.a.createElement(g.a,{className:t.name,variant:"h4"},s.name),n.a.createElement(g.a,{className:t.city,variant:"body1"},s.city),n.a.createElement(l.a,{variant:"contained",color:"primary",fullWidth:!0,style:{marginTop:16},onClick:()=>S(!0)},"View Movies")),n.a.createElement("div",{className:t.stats},n.a.createElement(f,{className:t.eventIcon}),n.a.createElement(g.a,{className:t.eventText,variant:"body2"},"\u20b9",s.ticketPrice," per ticket")),n.a.createElement("div",{className:t.stats},n.a.createElement(E.a,{className:t.eventIcon}),n.a.createElement(g.a,{className:t.eventText,variant:"body2"},s.seatsAvailable," seats Available"))),n.a.createElement(o.a,{open:k,onClose:()=>S(!1),maxWidth:"md",fullWidth:!0},n.a.createElement(m.a,null,s.name," - Available Movies"),n.a.createElement(d.a,null,n.a.createElement(h.a,{container:!0,spacing:2},N.map(e=>n.a.createElement(h.a,{item:!0,xs:12,sm:6,key:e._id},n.a.createElement(p.a,{display:"flex",p:2,border:1,borderColor:"grey.300",borderRadius:4},n.a.createElement("img",{src:e.image,alt:e.title,style:{width:80,height:120,objectFit:"cover"}}),n.a.createElement(p.a,{ml:2,flex:1},n.a.createElement(g.a,{variant:"h6"},e.title),n.a.createElement(g.a,{variant:"body2",color:"textSecondary"},e.genre," \u2022 ",e.duration," min"),n.a.createElement(g.a,{variant:"body2",style:{marginTop:8}},e.description.substring(0,80),"..."),n.a.createElement(l.a,{component:y.b,to:"/movie/booking/".concat(e._id),variant:"contained",color:"primary",size:"small",style:{marginTop:8},onClick:()=>S(!1)},"Book Now")))))))))}))},258:function(e,t,a){"use strict";var i=a(0),n=a.n(i),s=a(33);t.a=Object(s.a)(n.a.createElement(n.a.Fragment,null,n.a.createElement("defs",null,n.a.createElement("path",{id:"a",d:"M0 0h24v24H0V0z"})),n.a.createElement("path",{d:"M4 18v3h3v-3h10v3h3v-6H4zm15-8h3v3h-3zM2 10h3v3H2zm15 3H7V5c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2v8z"})),"EventSeat")},294:function(e,t,a){"use strict";var i=a(1),n=a(5),s=a(0),r=a.n(s),c=a(6),l=a(8),o=a(11);function m(e){var t,a,i;return t=e,a=0,i=1,e=(Math.min(Math.max(a,t),i)-a)/(i-a),e=(e-=1)*e*e+1}var d=r.a.forwardRef((function(e,t){var a,s=e.classes,l=e.className,d=e.color,h=void 0===d?"primary":d,p=e.disableShrink,g=void 0!==p&&p,u=e.size,v=void 0===u?40:u,f=e.style,E=e.thickness,b=void 0===E?3.6:E,C=e.value,y=void 0===C?0:C,x=e.variant,k=void 0===x?"indeterminate":x,S=Object(n.a)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),N={},D={},w={};if("determinate"===k||"static"===k){var j=2*Math.PI*((44-b)/2);N.strokeDasharray=j.toFixed(3),w["aria-valuenow"]=Math.round(y),"static"===k?(N.strokeDashoffset="".concat(((100-y)/100*j).toFixed(3),"px"),D.transform="rotate(-90deg)"):(N.strokeDashoffset="".concat((a=(100-y)/100,a*a*j).toFixed(3),"px"),D.transform="rotate(".concat((270*m(y/70)).toFixed(3),"deg)"))}return r.a.createElement("div",Object(i.a)({className:Object(c.a)(s.root,l,"inherit"!==h&&s["color".concat(Object(o.a)(h))],{indeterminate:s.indeterminate,static:s.static}[k]),style:Object(i.a)({width:v,height:v},D,{},f),ref:t,role:"progressbar"},w,S),r.a.createElement("svg",{className:s.svg,viewBox:"".concat(22," ").concat(22," ").concat(44," ").concat(44)},r.a.createElement("circle",{className:Object(c.a)(s.circle,g&&s.circleDisableShrink,{indeterminate:s.circleIndeterminate,static:s.circleStatic}[k]),style:N,cx:44,cy:44,r:(44-b)/2,fill:"none",strokeWidth:b})))}));t.a=Object(l.a)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},"@keyframes circular-rotate":{"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(d)},427:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return F}));var i=a(0),n=a.n(i),s=a(27),r=a(40),c=a(8),l=a(294),o=a(212),m=a(13),d=a(4),h=a(9),p=a.n(h),g=a(141),u=a(438),v=a(66),f=a(33),E=Object(f.a)(n.a.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add"),b=a(69);const C=["image"];class y extends i.Component{constructor(){super(...arguments),this.state={_id:"",name:"",image:null,ticketPrice:"",city:"",seatsAvailable:"",seats:[],notification:{}},this.handleFieldChange=(e,t)=>{const a=Object(d.a)({},this.state);a[e]=t,this.setState(a)},this.onSubmitAction=async e=>{const{getCinemas:t,createCinemas:a,updateCinemas:i,removeCinemas:n}=this.props,{_id:s,name:r,image:c,ticketPrice:l,city:o,seatsAvailable:m,seats:d}=this.state,h={name:r,ticketPrice:l,city:o,seatsAvailable:m,seats:d};let p={};p="create"===e?await a(c,h):"update"===e?await i(c,h,s):await n(s),this.setState({notification:p}),p&&"success"===p.status&&t()},this.handleSeatsChange=(e,t)=>{if(t>10)return;const{seats:a}=this.state;a[e]=Array.from({length:t},()=>0),this.setState({seats:a})},this.onAddSeatRow=()=>{this.setState(e=>({seats:[...e.seats,[]]}))},this.renderSeatFields=()=>{const{seats:e}=this.state,{classes:t}=this.props;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:t.field},n.a.createElement(g.a,{onClick:()=>this.onAddSeatRow()},n.a.createElement(E,null)," add Seats")),e.length>0&&e.map((e,a)=>n.a.createElement("div",{key:"seat-".concat(a,"-").concat(e.length),className:t.field},n.a.createElement(u.a,{key:"new-seat-".concat(a),className:t.textField,label:"Add number of seats for row : "+(a+10).toString(36).toUpperCase(),margin:"dense",required:!0,value:e.length,variant:"outlined",type:"number",inputProps:{min:0,max:10},onChange:e=>this.handleSeatsChange(a,e.target.value)}))))}}componentDidMount(){if(this.props.editCinema){const e=this.props.editCinema,{image:t}=e,a=Object(m.a)(e,C);this.setState(Object(d.a)({},a))}}render(){const{classes:e,className:t}=this.props,{name:a,image:i,ticketPrice:s,city:r,seatsAvailable:c,notification:l}=this.state,o=p()(e.root,t),m=this.props.editCinema?"Edit Cinema":"Add Cinema",d=this.props.editCinema?"Update Cinema":"Save Details",h=this.props.editCinema?()=>this.onSubmitAction("update"):()=>this.onSubmitAction("create");return n.a.createElement("div",{className:o},n.a.createElement(v.a,{variant:"h4",className:e.title},m),n.a.createElement("form",{autoComplete:"off",noValidate:!0},n.a.createElement("div",{className:e.field},n.a.createElement(u.a,{className:e.textField,helperText:"Please specify the cinema name",label:"Name",margin:"dense",required:!0,value:a,variant:"outlined",onChange:e=>this.handleFieldChange("name",e.target.value)}),n.a.createElement(u.a,{fullWidth:!0,className:e.textField,label:"City",margin:"dense",required:!0,variant:"outlined",value:r,onChange:e=>this.handleFieldChange("city",e.target.value)})),n.a.createElement("div",{className:e.field},n.a.createElement(b.b,{className:e.textField,file:i,onUpload:e=>{const t=e.target.files[0];this.handleFieldChange("image",t)}})),n.a.createElement("div",{className:e.field},n.a.createElement(u.a,{className:e.textField,label:"Ticket Price (\u20b9)",margin:"dense",type:"number",value:s,variant:"outlined",onChange:e=>this.handleFieldChange("ticketPrice",e.target.value)}),n.a.createElement(u.a,{className:e.textField,label:"Seats Available",margin:"dense",required:!0,value:c,variant:"outlined",onChange:e=>this.handleFieldChange("seatsAvailable",e.target.value)})),this.renderSeatFields()),n.a.createElement(g.a,{className:e.buttonFooter,color:"primary",variant:"contained",onClick:h},d),this.props.editCinema&&n.a.createElement(g.a,{color:"secondary",className:e.buttonFooter,variant:"contained",onClick:()=>this.onSubmitAction("remove")},"Delete Cinema"),l&&l.status?"success"===l.status?n.a.createElement(v.a,{className:e.infoMessage,color:"primary",variant:"caption"},l.message):n.a.createElement(v.a,{className:e.infoMessage,color:"error",variant:"caption"},l.message):null)}}const x={getCinemas:r.f,createCinemas:r.d,updateCinemas:r.F,removeCinemas:r.s};var k=Object(s.b)(null,x)(Object(c.a)(e=>({root:{},title:{marginLeft:e.spacing(3)},field:{margin:e.spacing(3),display:"flex"},textField:{width:"100%",marginRight:e.spacing(3)},portletFooter:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},buttonFooter:{margin:e.spacing(3)},infoMessage:{marginLeft:e.spacing(3)}}))(y));class S extends i.Component{constructor(){super(...arguments),this.state={openAddDialog:!1}}OpenAddDialog(){this.setState({openAddDialog:!0})}CloseAddDialog(){this.setState({openAddDialog:!1})}render(){const{openAddDialog:e}=this.state,{classes:t,className:a,search:s,onChangeSearch:r}=this.props,c=p()(t.root,a);return n.a.createElement(i.Fragment,null,n.a.createElement("div",{className:c},n.a.createElement("div",{className:t.row},n.a.createElement(b.g,{className:t.searchInput,placeholder:"Search cinema",value:s,onChange:r}),n.a.createElement(g.a,{onClick:()=>this.OpenAddDialog(),color:"primary",size:"small",variant:"outlined"},"Add"))),n.a.createElement(b.f,{id:"Add-cinema",open:e,handleClose:()=>this.CloseAddDialog()},n.a.createElement(k,null)))}}var N=Object(c.a)(e=>({root:{},row:{height:"42px",display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:e.spacing(1)},spacer:{flexGrow:1},searchInput:{marginRight:e.spacing(1)}}))(S),D=a(253),w=a(25);class j extends i.Component{constructor(e){super(e),this.openEditDialog=e=>{this.setState({openEditDialog:!0,editCinema:e})},this.CloseEditDialog=()=>{this.setState({openEditDialog:!1,editCinema:null})},this.state={editCinema:null,openEditDialog:!1,search:""}}componentDidMount(){const{cinemas:e,getCinemas:t}=this.props;e.length||t()}editCinema(e){this.OpenEditDialog(e)}render(){const{classes:e,cinemas:t}=this.props,{editCinema:a,search:i}=this.state,s=Object(w.c)(i,t,"name");return n.a.createElement("div",{className:e.root},n.a.createElement(N,{search:this.state.search,onChangeSearch:e=>this.setState({search:e.target.value})}),n.a.createElement("div",{className:e.content},0===s.length?n.a.createElement(l.a,null):n.a.createElement(o.a,{container:!0,spacing:3},s.map(e=>n.a.createElement(o.a,{item:!0,key:e._id,lg:4,md:6,xs:12,onClick:()=>this.openEditDialog(e)},n.a.createElement(D.a,{cinema:e}))))),n.a.createElement(b.f,{id:"Edit-cinema",open:this.state.openEditDialog,handleClose:()=>this.CloseEditDialog()},n.a.createElement(k,{editCinema:a,handleClose:()=>this.CloseEditDialog()})))}}const A={getCinemas:r.f};var F=Object(s.b)(e=>{let{cinemaState:t}=e;return{cinemas:t.cinemas}},A)(Object(c.a)(e=>({root:{padding:e.spacing(3)},content:{marginTop:e.spacing(2)},progressWrapper:{paddingTop:"48px",paddingBottom:"24px",display:"flex",justifyContent:"center"},pagination:{marginTop:"24px",display:"flex",alignItems:"center",justifyContent:"flex-end"}}))(j))}}]);