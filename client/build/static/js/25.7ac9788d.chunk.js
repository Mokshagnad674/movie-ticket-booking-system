(this["webpackJsonpmoviestore-client"]=this["webpackJsonpmoviestore-client"]||[]).push([[25],{426:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return V}));var i=a(0),n=a.n(i),s=a(27),l=a(8),o=a(294),r=a(212),c=a(9),d=a.n(c),m=a(103),p=a(66),g=a(193),h=a(187),v=a(33),u=Object(v.a)(n.a.createElement(n.a.Fragment,null,n.a.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),n.a.createElement("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})),"AccessTime"),E=Object(v.a)(n.a.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),f=a(69);const x=Object(m.a)(e=>({root:{maxWidth:"100%",paddingBottom:e.spacing(2)},imageWrapper:{height:"200px",margin:"0 auto",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},image:{width:"100%",height:"100%","object-fit":"cover"},details:{padding:e.spacing(3)},title:{fontSize:"18px",lineHeight:"21px",marginTop:e.spacing(2),textTransform:"capitalize"},description:{lineHeight:"16px",height:e.spacing(4),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:e.palette.text.secondary,marginTop:e.spacing(1),marginBottom:e.spacing(2)},stats:{display:"flex",alignItems:"center",paddingTop:e.spacing(1),paddingLeft:e.spacing(3)},updateIcon:{color:e.palette.text.secondary},updateText:{marginLeft:e.spacing(1),color:e.palette.text.secondary},deleteButton:{color:e.palette.error.main,marginLeft:"auto"}}));var C=function(e){const t=x(e),{className:a,movie:i,onDelete:s}=e,l=d()(t.root,a);return n.a.createElement(f.c,{className:l},n.a.createElement("div",{className:t.imageWrapper},n.a.createElement("img",{alt:"movie",className:t.image,src:i.image||"https://via.placeholder.com/300x450/333/FFF?text=No+Image",onError:e=>{e.target.src="https://via.placeholder.com/300x450/333/FFF?text=No+Image"}})),n.a.createElement("div",{className:t.details},n.a.createElement(p.a,{className:t.title,variant:"h4"},i.title),n.a.createElement(p.a,{className:t.description,variant:"body1"},i.description)),n.a.createElement(g.a,{className:t.stats},n.a.createElement(u,{className:t.updateIcon}),n.a.createElement(p.a,{className:t.updateText,variant:"body2"},i.duration," minutes"),s&&n.a.createElement(h.a,{className:t.deleteButton,onClick:()=>s(i._id),size:"small"},n.a.createElement(E,null))))},b=a(141),N=a(13),M=a(4),y=a(429),D=a(438),F=a(228),w=a(213),j=a(425),S=a(259);const O=["action","adventure","comedy","drama","fantasy","historical","horror","mystery","romance","science fiction","thriller","political","western"],T=["english","greek","german","french"];var A=a(40),k=a(82);const z=["image","genre"],I=["image","genre"];class B extends i.Component{constructor(){super(...arguments),this.state={title:"",image:null,genre:[],language:"",duration:"",description:"",director:"",cast:"",releaseDate:new Date,endDate:new Date},this.handleChange=e=>{this.setState({state:e.target.value})},this.handleFieldChange=(e,t)=>{const a=Object(M.a)({},this.state);a[e]=t,this.setState(a)},this.onAddMovie=()=>{const e=this.state,{image:t,genre:a}=e,i=Object(N.a)(e,z),n=Object(M.a)(Object(M.a)({},i),{},{genre:a.join(",")});this.props.addMovie(t,n)},this.onUpdateMovie=()=>{const e=this.state,{image:t,genre:a}=e,i=Object(N.a)(e,I),n=Object(M.a)(Object(M.a)({},i),{},{genre:a.join(",")});this.props.updateMovie(this.props.edit._id,n,t)},this.onRemoveMovie=()=>this.props.removeMovie(this.props.edit._id)}componentDidMount(){if(this.props.edit){const{title:e,language:t,genre:a,director:i,cast:n,description:s,duration:l,releaseDate:o,endDate:r}=this.props.edit;this.setState({title:e,language:t,genre:a.split(","),director:i,cast:n,description:s,duration:l,releaseDate:o,endDate:r})}}componentDidUpdate(e){if(e.movie!==this.props.movie){const{title:e,genre:t,language:a}=this.props.movie;this.setState({title:e,genre:t,language:a})}}render(){const{classes:e,className:t}=this.props,{title:a,image:i,genre:s,language:l,duration:o,description:r,director:c,cast:m,releaseDate:g,endDate:h}=this.state,v=d()(e.root,t),u=this.props.edit?"Edit Movie":"Add Movie",E=this.props.edit?"Update Movie":"Save Details",f=this.props.edit?()=>this.onUpdateMovie():()=>this.onAddMovie();return n.a.createElement("div",{className:v},n.a.createElement(p.a,{variant:"h4",className:e.title},u),n.a.createElement("form",{autoComplete:"off",noValidate:!0},n.a.createElement("div",{className:e.field},n.a.createElement(D.a,{className:e.textField,helperText:"Please specify the title",label:"Title",margin:"dense",required:!0,value:a,variant:"outlined",onChange:e=>this.handleFieldChange("title",e.target.value)})),n.a.createElement("div",{className:e.field},n.a.createElement(y.a,{multiple:!0,displayEmpty:!0,className:e.textField,label:"Genre",margin:"dense",required:!0,value:s,variant:"outlined",onChange:e=>this.handleFieldChange("genre",e.target.value)},O.map((e,t)=>n.a.createElement(F.a,{key:e+"-"+t,value:e},e)))),n.a.createElement("div",{className:e.field},n.a.createElement(D.a,{fullWidth:!0,multiline:!0,className:e.textField,label:"Description",margin:"dense",required:!0,variant:"outlined",value:r,onChange:e=>this.handleFieldChange("description",e.target.value)})),n.a.createElement("div",{className:e.field},n.a.createElement(D.a,{select:!0,className:e.textField,label:"Language",margin:"dense",required:!0,value:l,variant:"outlined",onChange:e=>this.handleFieldChange("language",e.target.value)},T.map((e,t)=>n.a.createElement(F.a,{key:e+"-"+t,value:e},e))),n.a.createElement(D.a,{className:e.textField,label:"Duration",margin:"dense",type:"number",value:o,variant:"outlined",onChange:e=>this.handleFieldChange("duration",e.target.value)})),n.a.createElement("div",{className:e.field},n.a.createElement(D.a,{className:e.textField,label:"Director",margin:"dense",required:!0,value:c,variant:"outlined",onChange:e=>this.handleFieldChange("director",e.target.value)}),n.a.createElement(D.a,{className:e.textField,label:"Cast",margin:"dense",required:!0,value:m,variant:"outlined",onChange:e=>this.handleFieldChange("cast",e.target.value)})),n.a.createElement("div",{className:e.field},n.a.createElement(w.a,{utils:S.a},n.a.createElement(j.a,{className:e.textField,inputVariant:"outlined",margin:"normal",id:"release-date",label:"Release Date",value:g,onChange:e=>this.handleFieldChange("releaseDate",e._d),KeyboardButtonProps:{"aria-label":"change date"}}),n.a.createElement(j.a,{className:e.textField,inputVariant:"outlined",margin:"normal",id:"end-date",label:"End Date",value:h,onChange:e=>this.handleFieldChange("endDate",e._d),KeyboardButtonProps:{"aria-label":"change date"}}))),n.a.createElement("div",{className:e.field},n.a.createElement(k.a,{className:e.upload,file:i,onUpload:e=>{const t=e.target.files[0];this.handleFieldChange("image",t)}}))),n.a.createElement(b.a,{className:e.buttonFooter,color:"primary",variant:"contained",onClick:f},E),this.props.edit&&n.a.createElement(b.a,{color:"secondary",className:e.buttonFooter,variant:"contained",onClick:this.onRemoveMovie},"Delete Movie"))}}const q={addMovie:A.b,updateMovie:A.G,removeMovie:A.t};var L=Object(s.b)(e=>{let{movieState:t}=e;return{movies:t.movies}},q)(Object(l.a)(e=>({root:{},title:{marginLeft:e.spacing(3)},field:{margin:e.spacing(3),display:"flex"},textField:{textTransform:"capitalize",width:"100%",marginRight:e.spacing(3)},upload:{width:"100%",marginTop:e.spacing(2)},portletFooter:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},buttonFooter:{margin:e.spacing(3)},infoMessage:{marginLeft:e.spacing(3)}}))(B));class R extends i.Component{constructor(){super(...arguments),this.state={openAddDialog:!1}}OpenAddDialog(){this.setState({openAddDialog:!0})}CloseAddDialog(){this.setState({openAddDialog:!1})}render(){const{openAddDialog:e}=this.state,{classes:t,className:a,search:s,onChangeSearch:l}=this.props,o=d()(t.root,a);return n.a.createElement(i.Fragment,null,n.a.createElement("div",{className:o},n.a.createElement("div",{className:t.row},n.a.createElement(f.g,{className:t.searchInput,placeholder:"Search movie",value:s,onChange:l}),n.a.createElement(b.a,{onClick:()=>this.OpenAddDialog(),color:"primary",size:"small",variant:"outlined"},"Add"))),n.a.createElement(f.f,{id:"Add-movie",open:e,handleClose:()=>this.CloseAddDialog()},n.a.createElement(L,null)))}}var W=Object(l.a)(e=>({root:{},row:{height:"42px",display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:e.spacing(1)},spacer:{flexGrow:1},searchInput:{marginRight:e.spacing(1)}}))(R),_=a(25);class H extends i.Component{constructor(){super(...arguments),this.state={search:""},this.handleDeleteMovie=async e=>{if(window.confirm("Are you sure you want to delete this movie?"))try{await this.props.removeMovie(e),this.props.getMovies()}catch(t){alert("Failed to delete movie")}}}componentDidMount(){const{movies:e,getMovies:t}=this.props;e.length||t()}renderMovies(){const{classes:e}=this.props,t=Object(_.c)(this.state.search,this.props.movies,"title");return t.length?n.a.createElement(r.a,{container:!0,spacing:3},t.map(e=>n.a.createElement(r.a,{item:!0,key:e._id,lg:4,md:6,xs:12,onClick:()=>this.props.onSelectMovie(e)},n.a.createElement(C,{movie:e,onDelete:this.handleDeleteMovie})))):n.a.createElement("div",{className:e.progressWrapper},n.a.createElement(o.a,null))}render(){const{classes:e,selectedMovie:t}=this.props;return n.a.createElement("div",{className:e.root},n.a.createElement(W,{search:this.state.search,onChangeSearch:e=>this.setState({search:e.target.value})}),n.a.createElement("div",{className:e.content},this.renderMovies()),n.a.createElement(f.f,{id:"Edit-movie",open:Boolean(t),handleClose:()=>this.props.onSelectMovie(null)},n.a.createElement(L,{edit:t})))}}const U={getMovies:A.j,onSelectMovie:A.q,removeMovie:A.t};var V=Object(s.b)(e=>{let{movieState:t}=e;return{movies:t.movies,latestMovies:t.latestMovies,comingSoon:t.comingSoon,nowShowing:t.nowShowing,selectedMovie:t.selectedMovie}},U)(Object(l.a)(e=>({root:{padding:e.spacing(3)},content:{marginTop:e.spacing(2)},progressWrapper:{paddingTop:"48px",paddingBottom:"24px",display:"flex",justifyContent:"center"},pagination:{marginTop:"24px",display:"flex",alignItems:"center",justifyContent:"flex-end"}}))(H))}}]);